[project]
name = "trellis-server"
version = "0.1.0"
description = "Trellis.2 inference server for Crossworld"
readme = "README.md"
requires-python = ">=3.8,<3.10"
dependencies = [
    # Server dependencies
    "fastapi==0.109.0",
    "uvicorn[standard]==0.27.0",
    "pydantic==2.5.3",

    # Deep learning
    "torch>=2.0.0",
    "torchvision>=0.15.0",
    "numpy>=1.24.0,<2.0.0",  # NumPy 2.x breaks compatibility with numba/rembg

    # Trellis basic dependencies (from TRELLIS setup.sh --basic)
    "pillow>=10.0.0",
    "imageio",
    "imageio-ffmpeg",
    "tqdm",
    "easydict",
    "opencv-python-headless",
    "scipy",
    "ninja",
    # "rembg",  # Skipped: requires old numba (0.53.1) incompatible with Python 3.9+
    "onnxruntime",
    "trimesh",
    "open3d",
    "xatlas",
    "pyvista",
    "pymeshfix",
    "igraph",
    "transformers",
    "utils3d @ git+https://github.com/EasternJournalist/utils3d.git@9a4eb15e4021b67b12c460c7057d642626897ec8",
]

[dependency-groups]
dev = [
    "pytest>=7.4.0",
    "httpx>=0.26.0",
]
