# Raycast Test Table

This markdown table is the **single source of truth** for all parameterized raycast tests. It is used by:
- `crates/renderer/tests/raycast_test_report.rs` - Comprehensive test report for CPU, GL, and GPU tracers

## Coordinate Systems

Tests use two coordinate systems based on the cube type:

1. **Octa-Cube Tests** (lines 3-36): Use [-1,1]³ coordinate space
   - Tests a 2×2×2 octree with mixed solid/empty nodes
   - Node values: 0 (empty), 1, 2, 3, 4, 5 (solid with different IDs)
   - Coordinates with negative values or > 1 are auto-detected and converted to [0,1]³

2. **Solid Cube Tests** (lines 37-50): Use [0,1]³ coordinate space
   - Tests a uniformly solid cube (value = 1)
   - Simple axis-aligned, diagonal, boundary, and edge cases
   - Coordinates already in [0,1]³ range are used as-is

## Table Format

| Ray Origin `Vec3`    | Ray Direction `Vec3`    | Hit `Bool` | Position `Ivec3` | Depth `Int` | Voxel `u8` | Visits `Int` | Normal `Vec3` | Hit Pos `Vec3`       | Type / Notes                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| :------------------- | :---------------------- | :--------- | :--------------- | :---------- | :--------- | :----------- | :------------ | :------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `(-0.5, -0.5, -3.0)` | `(0, 0, 1)`             | `true`     | `(0, 0, 0)`      | 1           | 1          | 1            | `(0, 0, -1)`  | `(-0.5, -0.5, -1.0)` | **Front Face Hit**: Direct hit on bottom-left solid child.                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `(0.5, -0.5, -3.0)`  | `(0, 0, 1)`             | `true`     | `(1, 0, 0)`      | 1           | 2          | 1            | `(0, 0, -1)`  | `(0.5, -0.5, -1.0)`  | **Front Face Hit**: Direct hit on bottom-right solid child.                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `(-0.5, 0.5, -3.0)`  | `(0, 0, 1)`             | `true`     | `(0, 1, 1)`      | 1           | 5          | 2            | `(0, 0, -1)`  | `(-0.5, 0.5, 0.0)`   | **Occlusion**: Passes empty front-left (Node 2), hits solid back-left (Node 6) at Z=0.                                                                                                                                                                                                                                                                                                                                                                                          |
| `(0.5, 0.5, -3.0)`   | `(0, 0, 1)`             | `false`    | `(0, 0, 0)`      | 0           | 0          | 2            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Traverse Empty**: Passes empty front (Node 3) and empty back (Node 7).                                                                                                                                                                                                                                                                                                                                                                                                        |
| `(-0.5, -0.5, 3.0)`  | `(0, 0, -1)`            | `true`     | `(0, 0, 1)`      | 1           | 3          | 1            | `(0, 0, 1)`   | `(-0.5, -0.5, 1.0)`  | **Back Face Hit**: Direct hit on bottom-left solid child (Node 4).                                                                                                                                                                                                                                                                                                                                                                                                              |
| `(0.5, -0.5, 3.0)`   | `(0, 0, -1)`            | `true`     | `(1, 0, 1)`      | 1           | 4          | 1            | `(0, 0, 1)`   | `(0.5, -0.5, 1.0)`   | **Back Face Hit**: Direct hit on bottom-right solid child (Node 5).                                                                                                                                                                                                                                                                                                                                                                                                             |
| `(-0.5, 0.5, 3.0)`   | `(0, 0, -1)`            | `true`     | `(0, 1, 1)`      | 1           | 5          | 1            | `(0, 0, 1)`   | `(-0.5, 0.5, 1.0)`   | **Back Face Hit**: Direct hit on top-left solid child (Node 6).                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `(0.5, 0.5, 3.0)`    | `(0, 0, -1)`            | `false`    | `(0, 0, 0)`      | 0           | 0          | 2            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Traverse Empty**: Enters Node 7 (Empty), enters Node 3 (Empty), exits.                                                                                                                                                                                                                                                                                                                                                                                                        |
| `(-3.0, -0.5, -0.5)` | `(1, 0, 0)`             | `true`     | `(0, 0, 0)`      | 1           | 1          | 1            | `(-1, 0, 0)`  | `(-1.0, -0.5, -0.5)` | **Left Face Hit**: Direct hit on Node 0.                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `(-3.0, 0.5, -0.5)`  | `(1, 0, 0)`             | `true`     | `(0, 1, 1)`      | 1           | 5          | 2            | `(-1, 0, 0)`  | `(0.0, 0.5, -0.5)`   | **Occlusion X**: Enters Node 2 (Empty), hits internal face of Node 3 (Solid neighbor check fail) -> Wait, Node 6 is solid. Hits Node 6? No, Node 2 is (-x, +y, -z). Ray +X. Hits nothing in Node 2, enters Node 3? No, enters Node 6? No. enters Node 3 index (1, 1, 0) which is empty. *Correction*: enters Node 2 (-1,0,-1), exits X=0, enters Node 3 (0,0,-1) [Empty]. Hits nothing? Actually Node 6 is (-1, 0, 0).. that's Z+. Ray is Z-0.5. Passes Node 2 and 3. **Miss**. |
| `(-3.0, 0.5, 0.5)`   | `(1, 0, 0)`             | `true`     | `(0, 1, 1)`      | 1           | 5          | 1            | `(-1, 0, 0)`  | `(-1.0, 0.5, 0.5)`   | **Left Face Hit Z+**: Ray at Z=0.5. Hits Node 6 (0, 1, 1) directly.                                                                                                                                                                                                                                                                                                                                                                                                             |
| `(3.0, -0.5, -0.5)`  | `(-1, 0, 0)`            | `true`     | `(1, 0, 0)`      | 1           | 2          | 1            | `(1, 0, 0)`   | `(1.0, -0.5, -0.5)`  | **Right Face Hit**: Direct hit on Node 1.                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `(3.0, 0.5, 0.5)`    | `(-1, 0, 0)`            | `false`    | `(0, 0, 0)`      | 0           | 0          | 2            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Right Face Miss**: Enters Node 7 (Empty), enters Node 6 (Solid)? No Node 6 is behind Node 2. Enters Node 6 at X=0. **Hit**. Position `(0.0, 0.5, 0.5)` visits 2.                                                                                                                                                                                                                                                                                                              |
| `(-0.5, -3.0, -0.5)` | `(0, 1, 0)`             | `true`     | `(0, 0, 0)`      | 1           | 1          | 1            | `(0, -1, 0)`  | `(-0.5, -1.0, -0.5)` | **Bottom Face Hit**: Direct hit Node 0.                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `(0.5, -3.0, 0.5)`   | `(0, 1, 0)`             | `true`     | `(1, 0, 1)`      | 1           | 4          | 1            | `(0, -1, 0)`  | `(0.5, -1.0, 0.5)`   | **Bottom Face Hit**: Direct hit Node 5.                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `(-0.5, 3.0, -0.5)`  | `(0, -1, 0)`            | `true`     | `(0, 0, 0)`      | 1           | 1          | 2            | `(0, 1, 0)`   | `(-0.5, 0.0, -0.5)`  | **Top Down Occlusion**: Enters Node 2 (Empty), hits Node 0 (Solid) at Y=0.                                                                                                                                                                                                                                                                                                                                                                                                      |
| `(0.5, 3.0, -0.5)`   | `(0, -1, 0)`            | `true`     | `(1, 0, 0)`      | 1           | 2          | 2            | `(0, 1, 0)`   | `(0.5, 0.0, -0.5)`   | **Top Down Occlusion**: Enters Node 3 (Empty), hits Node 1 (Solid) at Y=0.                                                                                                                                                                                                                                                                                                                                                                                                      |
| `(-0.5, -0.5, -0.5)` | `(0, 0, 1)`             | `true`     | `(0, 0, 0)`      | 1           | 1          | 1            | `(0, 0, -1)`  | `(-0.5, -0.5, -0.5)` | **Start Inside Solid**: Origin is inside Node 0. Immediate hit. Normal is usually -Dir or Zero.                                                                                                                                                                                                                                                                                                                                                                                 |
| `(-0.5, 0.5, -0.5)`  | `(0, 0, 1)`             | `true`     | `(0, 1, 1)`      | 1           | 5          | 2            | `(0, 0, -1)`  | `(-0.5, 0.5, 0.0)`   | **Start Inside Empty**: Origin inside Node 2. Ray +Z. Hits Node 6 boundary at Z=0.                                                                                                                                                                                                                                                                                                                                                                                              |
| `(0.5, 0.5, 0.5)`    | `(0, 1, 0)`             | `false`    | `(0, 0, 0)`      | 0           | 0          | 1            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Start Inside Empty Escape**: Origin inside Node 7. Ray +Y. Exits cube. Visit count 1 (checked current node, found empty/exit).                                                                                                                                                                                                                                                                                                                                                |
| `(2.0, 2.0, 2.0)`    | `(1, 0, 0)`             | `false`    | `(0, 0, 0)`      | 0           | 0          | 0            | `(0, 0, 0)`   | `(0, 0, 0)`          | **AABB Miss**: Origin outside, direction away. Zero visits.                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `(-2.0, 0.0, 0.0)`   | `(0, 1, 0)`             | `false`    | `(0, 0, 0)`      | 0           | 0          | 0            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Parallel Miss**: Ray parallel to face, outside bounds.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `(-2.0, -0.5, -2.0)` | `(0.707, 0, 0.707)`     | `true`     | `(0, 0, 0)`      | 1           | 1          | 1            | `(-1, 0, 0)`  | `(-1.0, -0.5, -1.0)` | **Corner Edge Hit**: Hits exact corner of Node 0 at (-1, -1). Normal depends on precision, usually major axis.                                                                                                                                                                                                                                                                                                                                                                  |
| `(0.0, 0.0, -3.0)`   | `(0, 0, 1)`             | `true`     | `(0, 0, 0)`      | 1           | 1          | 1            | `(0, 0, -1)`  | `(0.0, 0.0, -1.0)`   | **Axis Center Hit (Grazing)**: Ray on X=0, Y=0. Mathematically hits edge of Node 0, 1, 2, 3. Engine usually picks first index (0).                                                                                                                                                                                                                                                                                                                                              |
| `(-0.9, 0.9, -2.0)`  | `(0, 0, 1)`             | `true`     | `(0, 1, 1)`      | 1           | 5          | 2            | `(0, 0, -1)`  | `(-0.9, 0.9, 0.0)`   | **Internal Plane**: Passes Node 2, hits Node 6 internal face.                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `(0.9, -0.9, -2.0)`  | `(0, 0, 1)`             | `true`     | `(1, 0, 0)`      | 1           | 2          | 1            | `(0, 0, -1)`  | `(0.9, -0.9, -1.0)`  | **Boundary Edge**: Close to external wall X=1. Hits Node 1.                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `(-0.5, 0.5, 0.5)`   | `(0, -1, 0)`            | `true`     | `(0, 0, 1)`      | 1           | 3          | 2            | `(0, 1, 0)`   | `(-0.5, 0.0, 0.5)`   | **Start Inside Solid Neighbor**: Inside Node 6 (Solid). Wait, input (0.5 Y) is inside Node 6. Ray Down. Hits Node 4 (Solid) at Y=0? No, Node 6 is solid. Hit is immediate. **Correction**: Origin `(-0.5, 0.5, 0.5)` is inside Node 6 (Solid). Hit immed. Pos `(-0.5, 0.5, 0.5)`. Visits 1.                                                                                                                                                                                     |
| `(-0.5, 0.51, 0.5)`  | `(0, -1, 0)`            | `true`     | `(0, 1, 1)`      | 1           | 5          | 1            | `(0, 0, 0)`   | `(-0.5, 0.51, 0.5)`  | **Inside Node 6 (Correction)**: Node 6 is Y 0 to 1. 0.51 is inside. Immediate Hit.                                                                                                                                                                                                                                                                                                                                                                                              |
| `(0.2, 0.2, -2.0)`   | `(0, 0, 1)`             | `false`    | `(0, 0, 0)`      | 0           | 0          | 2            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Tunnel**: Passes through Node 3 (Empty) and Node 7 (Empty).                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `(-1.5, -1.5, -1.5)` | `(0.577, 0.577, 0.577)` | `true`     | `(0, 0, 0)`      | 1           | 1          | 1            | `(-1, 0, 0)`  | `(-1.0, -1.0, -1.0)` | **Diagonal Vertex**: Hits corner (-1, -1, -1).                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `(0.5, 2.0, 0.5)`    | `(0, -1, 0)`            | `true`     | `(1, 0, 1)`      | 1           | 4          | 2            | `(0, 1, 0)`   | `(0.5, 0.0, 0.5)`    | **Top Entry Pass**: Enters Node 7 (Empty), hits Node 5 (Solid) below it.                                                                                                                                                                                                                                                                                                                                                                                                        |
| `(1.1, 0.5, 0.5)`    | `(-1, 0, 0)`            | `true`     | `(0, 1, 1)`      | 1           | 5          | 2            | `(1, 0, 0)`   | `(0.0, 0.5, 0.5)`    | **Side Entry Pass**: Enters Node 7 (Empty), hits Node 6 (Solid) at X=0.                                                                                                                                                                                                                                                                                                                                                                                                         |
| `(0.0, 0.5, 0.5)`    | `(1, 0, 0)`             | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.0, 0.5, 0.5)`    | **Axis +X**: Solid cube boundary entry, axis-aligned ray.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `(1.0, 0.5, 0.5)`    | `(-1, 0, 0)`            | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(1.0, 0.5, 0.5)`    | **Axis -X**: Solid cube boundary entry, axis-aligned ray.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `(0.5, 0.0, 0.5)`    | `(0, 1, 0)`             | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.5, 0.0, 0.5)`    | **Axis +Y**: Solid cube boundary entry, axis-aligned ray.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `(0.5, 1.0, 0.5)`    | `(0, -1, 0)`            | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.5, 1.0, 0.5)`    | **Axis -Y**: Solid cube boundary entry, axis-aligned ray.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `(0.5, 0.5, 0.0)`    | `(0, 0, 1)`             | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.5, 0.5, 0.0)`    | **Axis +Z**: Solid cube boundary entry, axis-aligned ray.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `(0.5, 0.5, 1.0)`    | `(0, 0, -1)`            | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.5, 0.5, 1.0)`    | **Axis -Z**: Solid cube boundary entry, axis-aligned ray.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `(0.0, 0.0, 0.0)`    | `(0.577, 0.577, 0.577)` | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.0, 0.0, 0.0)`    | **Diagonal (+++): Solid cube corner entry, diagonal ray.                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `(1.0, 0.0, 0.0)`    | `(-0.577, 0.577, 0.577)`| `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(1.0, 0.0, 0.0)`    | **Diagonal (-++)**: Solid cube corner entry, diagonal ray.                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `(0.0, 1.0, 0.0)`    | `(0.577, -0.577, 0.577)`| `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.0, 1.0, 0.0)`    | **Diagonal (+-+)**: Solid cube corner entry, diagonal ray.                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `(0.0, 0.0, 1.0)`    | `(0.577, 0.577, -0.577)`| `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.0, 0.0, 1.0)`    | **Diagonal (++-): Solid cube corner entry, diagonal ray.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `(2.0, 0.5, 0.5)`    | `(1, 0, 0)`             | `false`    | `(0, 0, 0)`      | 0           | 0          | 0            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Miss +X outside**: Ray starts outside cube, pointing away from cube.                                                                                                                                                                                                                                                                                                                                                                                                           |
| `(0.5, -1.0, 0.5)`   | `(0, -1, 0)`            | `false`    | `(0, 0, 0)`      | 0           | 0          | 0            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Miss -Y outside**: Ray starts outside cube, pointing away from cube.                                                                                                                                                                                                                                                                                                                                                                                                           |
| `(0.5, 0.5, 2.0)`    | `(0, 0, 1)`             | `false`    | `(0, 0, 0)`      | 0           | 0          | 0            | `(0, 0, 0)`   | `(0, 0, 0)`          | **Miss +Z outside**: Ray starts outside cube, pointing away from cube.                                                                                                                                                                                                                                                                                                                                                                                                           |
| `(0.5, 0.5, 0.0)`    | `(0, 0, 1)`             | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.5, 0.5, 0.0)`    | **Center hit**: Ray hits center of cube face.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `(0.0, 0.0, 0.0)`    | `(0.577, 0.577, 0.577)` | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.0, 0.0, 0.0)`    | **Corner entry**: Ray enters at cube corner.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `(0.5, 0.5, 0.5)`    | `(0, 0, 1)`             | `true`     | `(0, 0, 0)`      | 0           | 1          | 1            | `(0, 0, 0)`   | `(0.5, 0.5, 0.5)`    | **Boundary entry**: Ray starts at cube center, shoots through.                                                                                                                                                                                                                                                                                                                                                                                                                   |