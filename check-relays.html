<!DOCTYPE html>
<html>
<head>
  <title>Check Crossworld Relay Settings</title>
</head>
<body>
  <h1>Crossworld Relay Settings Diagnostic</h1>
  <pre id="output"></pre>
  <script>
    const output = document.getElementById('output');

    // Check localStorage
    const relaySettings = localStorage.getItem('crossworld_relays');

    output.textContent = 'Raw localStorage value:\n';
    output.textContent += relaySettings || '(not set)';
    output.textContent += '\n\n';

    if (relaySettings) {
      output.textContent += 'Parsed relay settings:\n';
      try {
        const parsed = JSON.parse(relaySettings);
        output.textContent += JSON.stringify(parsed, null, 2);

        output.textContent += '\n\nWorld relays (enabledForWorld: true):\n';
        const worldRelays = parsed.filter(r => r.enabledForWorld);
        worldRelays.forEach(r => {
          output.textContent += `  - ${r.url}\n`;
        });

        output.textContent += '\nProfile relays (enabledForProfile: true):\n';
        const profileRelays = parsed.filter(r => r.enabledForProfile);
        profileRelays.forEach(r => {
          output.textContent += `  - ${r.url}\n`;
        });
      } catch (e) {
        output.textContent += 'ERROR: ' + e.message;
      }
    } else {
      output.textContent += 'No relay settings in localStorage.\n';
      output.textContent += 'Default settings will be used.\n';
    }
  </script>
</body>
</html>
